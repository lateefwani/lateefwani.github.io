---
title: Combined optical-electrical-thermal simulations in CST
date: 2021-03-06 00:00:00 +05:30
permalink: posts/2021/03/test
tags:
- new
---

This blog post describes how to set up a multi-physics simulation to model a photonic device. This type of device modeling is required when we need to analyze the behavior of a device, say a modulator in which the device state is changed by applying some external signal, for example, an electrical signal. And this electrical signal produces temperature change in the device, which alters the device's optical output. So, these types of devices can be analyzed by modeling them using a combined simulation in CST. 

In the electrical model, the voltage and current distribution in the device are obtained by solving the continuity equation. In the thermal model, the temperature distribution is obtained by solving the thermal diffusion equation. In the optical model, the effect of the temperature on the optical output is calculated.
First, create a model simple silicon waveguide and specify all the relevant parameters and the boundary conditions. Then, follow these steps to set up a co-simulation model. 
![Schematic.png](/uploads/Schematic.png)

## Electrical Simulation
To set up the electrical simulation, follow these steps.
1. Select the schematic view of the project.
![Fig_2.png](/uploads/Fig_2.png)

2. Select Tasks and from the drop-down menu, click on New Task.
![Fig_3.png](/uploads/Fig_3.png)

3. Now select Simulation project and click OK.
![Fig_4.png](/uploads/Fig_4.png)

4. Then select MWSSCHEM.
![Fig_5.png](/uploads/Fig_5.png)

5. Click on 3D Model, and after that, click on create simulation project.
![Fig_6.png](/uploads/Fig_6.png)

A window as shown below will open. Select the following options from the drop-down menu. This will create an electrical simulation project. Here, the voltages are defined on the electrodes.
![Fig_7.png](/uploads/Fig_7.png)

6. In this project, boundary conditions, current or electrical ports are defined, and relevant parameters such as electrical conductivity of all the materials are inserted. In the case of voltage port, the electrode material should be defined as the perfect electric conductor (PEC) otherwise;, the voltage can not be specified on the material.

7. To export the thermal loss term, select the Thermal Loss Calculation from the menu in the post-processing window.
![Fig_8.png](/uploads/Fig_8.png)

## Thermal Simulation}
8. Electrical simulation task is complete, and now we create the thermal simulation. For this, we go back to step one, i.e., schematic view of the original project.
![Fig_2-2a3459.png](/uploads/Fig_2-2a3459.png)

9. Then select the New Task.
![Fig_3-f18ede.png](/uploads/Fig_3-f18ede.png)

10. Now, repeat the step 3, 4, and 5. 

11. Select the following options as mentioned below for the steady-state thermal simulations. For the transient thermal simulations, select Thermal Transient instead of Thermal Steady State.
![Fig_9.png](/uploads/Fig_9.png)

12. Now, define the boundary conditions, thermal properties of materials, temperature-dependent refractive index and follow the next step to import loss term from the electrical model.
![Fig_10.png](/uploads/Fig_10.png)

13. In the case of a steady-state solution, a time signal is defined in the excitation signal option by double-clicking the default folder and selecting the fill the time according to our choice.
![Fig_11.png](/uploads/Fig_11.png)

## Optical Simulation
14. Now, we create the photonic simulation project for this again, we go back to step one, i.e., schematic view of our original project. The next four steps are similar to the electrical and thermal simulation project.
15. Select as described below. 
![Fig_12.png](/uploads/Fig_12.png)

13. After this, we import the thermal losses from the thermal model into the optical simulation by selecting the field source as given below.
![Capture-13.png](/uploads/Capture-13.png)

14. To extract temperature-dependent optical properties, we add temperature-dependent epsilon values into the CST by import option.
![Capture-14.png](/uploads/Capture-14.png)

After doing all this, make sure that you have defined all the materials' properties. For example, electrical conductivity is defined in the electrical stimulation, and thermal properties are defined in the thermal simulations similarly to optical simulation. To run the co-simulation, go to the schematic view of the original project and click update. It will automatically run all the simulations.



